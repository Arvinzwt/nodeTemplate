<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .btn {
            display: none;
        }

        #video {
            background: #cccccc;
        }
    </style>
</head>
<body>
    <!--API-01 MediaStream - 获取本地相机和麦克风的媒体流-->

    <button onclick="star()">开始</button>
    <button onclick="getAudioTracks()" class="btn">获取音频轨道</button>
    <button onclick="getTrackById()" class="btn">获取轨道id</button>
    <button onclick="getTracks()" class="btn">获取轨道列表</button>
    <button onclick="getVideoTracks()" class="btn">获取视频轨道</button>
    <button onclick="removeTrack()" class="btn">移除音频/视频轨道</button>

    <video id="video" autoplay></video>

</body>
<script>
    let localStream;

    function star() {
        navigator.mediaDevices.getUserMedia({video: true, audio: true}).then(stream => {
            // document.getElementById('video').srcObject = stream
            localStream = stream;
            document.querySelectorAll('.btn').forEach(item => {
                item.style.display = 'block';
            });

        }).catch(err => {
            console.log('err', err);
        })
    }

    function getAudioTracks() {
        console.log(localStream.getAudioTracks())
    }

    function getTrackById() {
        console.log(localStream.getTrackById(localStream.getAudioTracks()[0].id))
    }

    function getTracks() {
        console.log(localStream.getTracks())
    }

    function getVideoTracks() {
        console.log(localStream.getVideoTracks())
    }

    function removeTrack() {
        console.log(localStream.removeTrack(localStream.getAudioTracks()[0]))
        console.log(localStream.removeTrack(localStream.getVideoTracks()[0]))
    }
</script>
</html>