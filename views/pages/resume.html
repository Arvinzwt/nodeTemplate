<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Title</title>
    <link rel="stylesheet" href="/stylesheets/reset.css">
    <link rel="stylesheet" href="/stylesheets/resume.css">
</head>
<body>
<div id="pages">
    <div class="page">
        <div class="page-left">
            <div class="header" id="print">
                <img class="avatar" src="/images/avatar.jpg" alt="">
            </div>
            <ul class="main">
                <li class="item">
                    <span class="key key1">姓名：</span>
                    <span class="value">张大胖</span>
                </li>
                <li class="item">
                    <span class="key key1">年龄：</span>
                    <span class="value">303月</span>
                </li>
                <li class="item">
                    <span class="key key2">工作年限：</span>
                    <span class="value">10年工作经验</span>
                </li>
                <li class="interval"></li>
                <li class="item">
                    <span class="key key2">求职状态：</span>
                    <span class="value">你管我？</span>
                </li>
                <li class="item">
                    <span class="key key2">工作性质：</span>
                    <span class="value">全职</span>
                </li>
                <li class="item">
                    <span class="key key2">工作地区：</span>
                    <span class="value">上海</span>
                </li>
                <li class="item">
                    <span class="key key2">期望薪资：</span>
                    <span class="value">一个亿</span>
                </li>
                <li class="item">
                    <span class="key key2">期望职业：</span>
                    <span class="value">CEO</span>
                </li>
                <li class="interval"></li>
            </ul>
        </div>
        <div class="page-right">
            <div class="header">
                <h2 class="title">张胖胖</h2>
                <p class="introduction">
                    <span>邮箱：123@qq.com</span>
                    <span>电话：123123123</span>
                </p>
            </div>
            <ul class="main">
                <li class="title">工作经验</li>
                <li class="item">
                    <div class="date">2012 - 2010</div>
                    <div class="name">上海精锐有限公司</div>
                    <div class="introduction">
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司
                    </div>
                </li>
                <li class="interval"></li>
                <li class="title">这是标题</li>
                <li class="item">
                    <div class="date">2012 - 2010</div>
                    <div class="name">上海精锐有限公司</div>
                    <div class="introduction">
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="page">
        <div class="page-left">
            <ul class="main">
                <li class="title">自我评价</li>
                <li class="item">
                    <span class="value">老子敲击帅老子敲击帅老子敲击帅老子敲击帅老子敲击帅老子敲击帅老子敲击帅老子敲击帅老子敲击帅</span>
                </li>
            </ul>
        </div>
        <div class="page-right">
            <ul class="main">
                <li class="title">工作经验</li>
                <li class="item">
                    <div class="date">2012 - 2010</div>
                    <div class="name">上海精锐有限公司</div>
                    <div class="introduction">
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司
                    </div>
                </li>
                <li class="interval"></li>
                <li class="title">这是标题</li>
                <li class="item">
                    <div class="date">2012 - 2010</div>
                    <div class="name">上海精锐有限公司</div>
                    <div class="introduction">
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司上海精锐有限公司上海精锐有限公司
                        上海精锐有限公司
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>
</body>
<script src="/lib/axios/axios.min.js"></script>
<script>
    let conversion = new UnitConversion();
    let width = conversion.mmConversionPx(210);
    let height = conversion.mmConversionPx(297);
    (document.querySelectorAll('.page')).forEach(item => {
        item.style.cssText = `width: ${width}px;height: ${height}px;box-sizing: border-box;`
    })

    let print = document.querySelector('#print');
    if (print) {
        print.onclick = function () {
            axios.post('/api/pdf/pdfCreate', {
                "height": height,
                "width": width,
                "url": 'http://localhost:3000/pages/resume.html',
                "deviceScaleFactor": 1,
                "fileName": 'hn.pdf',
                "margin": {
                    "top": 0,
                    "bottom": 0,
                    "left": 0,
                    "right": 0,
                }
            }).then(function (response) {
                window.open(response.data.url, '_blank')
            }).catch(function (error) {
                console.log(error, 'error')
            });
        }
    }

    function UnitConversion() {
        /**
         * 获取DPI
         * @returns {Array}
         */
        this.conversion_getDPI = function () {
            var arrDPI = new Array;
            if (window.screen.deviceXDPI) {
                arrDPI[0] = window.screen.deviceXDPI;
                arrDPI[1] = window.screen.deviceYDPI;
            } else {
                var tmpNode = document.createElement("DIV");
                tmpNode.style.cssText = "width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden";
                document.body.appendChild(tmpNode);
                arrDPI[0] = parseInt(tmpNode.offsetWidth);
                arrDPI[1] = parseInt(tmpNode.offsetHeight);
                tmpNode.parentNode.removeChild(tmpNode);
            }
            return arrDPI;
        };
        /**
         * px转换为mm
         * @param value
         * @returns {number}
         */
        this.pxConversionMm = function (value) {
            var inch = value / this.conversion_getDPI()[0];
            var c_value = inch * 25.4;
            return c_value;
        };
        /**
         * mm转换为px
         * @param value
         * @returns {number}
         */
        this.mmConversionPx = function (value) {
            var inch = value / 25.4;
            var c_value = inch * this.conversion_getDPI()[0];
            return c_value;
        }
    }
</script>
</html>
